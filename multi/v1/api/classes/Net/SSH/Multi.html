<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Net::SSH::Multi</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Net::SSH::Multi</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/net/ssh/multi/channel_rb.html">
                lib/net/ssh/multi/channel.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/channel_proxy_rb.html">
                lib/net/ssh/multi/channel_proxy.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/dynamic_server_rb.html">
                lib/net/ssh/multi/dynamic_server.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/pending_connection_rb.html">
                lib/net/ssh/multi/pending_connection.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/server_rb.html">
                lib/net/ssh/multi/server.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/server_list_rb.html">
                lib/net/ssh/multi/server_list.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/session_rb.html">
                lib/net/ssh/multi/session.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/session_actions_rb.html">
                lib/net/ssh/multi/session_actions.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/subsession_rb.html">
                lib/net/ssh/multi/subsession.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi/version_rb.html">
                lib/net/ssh/multi/version.rb
                </a>
        <br />
                <a href="../../../files/lib/net/ssh/multi_rb.html">
                lib/net/ssh/multi.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="Multi.html">Net::SSH::Multi</a> is a library for controlling
multiple <a href="../SSH.html">Net::SSH</a> connections via a single
interface. It exposes an API similar to that of
Net::SSH::Connection::Session and Net::SSH::Connection::Channel, making it
simpler to adapt programs designed for single connections to be used with
multiple connections.
</p>
<p>
This library is particularly useful for automating repetitive tasks that
must be performed on multiple machines. It executes the commands in
parallel, and allows commands to be executed on subsets of servers (defined
by groups).
</p>
<pre>
  require 'net/ssh/multi'

  Net::SSH::Multi.start do |session|
    # access servers via a gateway
    session.via 'gateway', 'gateway-user'

    # define the servers we want to use
    session.use 'user1@host1'
    session.use 'user2@host2'

    # define servers in groups for more granular access
    session.group :app do
      session.use 'user@app1'
      session.use 'user@app2'
    end

    # execute commands on all servers
    session.exec &quot;uptime&quot;

    # execute commands on a subset of servers
    session.with(:app).exec &quot;hostname&quot;

    # run the aggregated event loop
    session.loop
  end
</pre>
<p>
See <a href="Multi/Session.html">Net::SSH::Multi::Session</a> for more
documentation.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000001">start</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="Multi/SessionActions.html" class="link">Net::SSH::Multi::SessionActions</a><br />
Class <a href="Multi/Channel.html" class="link">Net::SSH::Multi::Channel</a><br />
Class <a href="Multi/ChannelProxy.html" class="link">Net::SSH::Multi::ChannelProxy</a><br />
Class <a href="Multi/DynamicServer.html" class="link">Net::SSH::Multi::DynamicServer</a><br />
Class <a href="Multi/PendingConnection.html" class="link">Net::SSH::Multi::PendingConnection</a><br />
Class <a href="Multi/Server.html" class="link">Net::SSH::Multi::Server</a><br />
Class <a href="Multi/ServerList.html" class="link">Net::SSH::Multi::ServerList</a><br />
Class <a href="Multi/Session.html" class="link">Net::SSH::Multi::Session</a><br />
Class <a href="Multi/Subsession.html" class="link">Net::SSH::Multi::Subsession</a><br />
Class <a href="Multi/Version.html" class="link">Net::SSH::Multi::Version</a><br />

    </div>




      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="#M000001" class="method-signature">
          <span class="method-name">start</span><span class="method-args">(options={}) {|session| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is a convenience method for instantiating a new <a
href="Multi/Session.html">Net::SSH::Multi::Session</a>. If a block is
given, the session will be yielded to the block automatically closed (see
<a href="Multi/Session.html#M000054">Net::SSH::Multi::Session#close</a>)
when the block finishes. Otherwise, the new session will be returned.
</p>
<pre>
  Net::SSH::Multi.start do |session|
    # ...
  end

  session = Net::SSH::Multi.start
  # ...
  session.close
</pre>
<p>
Any options are passed directly to <a
href="Multi/Session.html#M000046">Net::SSH::Multi::Session.new</a> (q.v.).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000001-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000001-source">
<pre>
    <span class="ruby-comment cmt"># File lib/net/ssh/multi.rb, line 57</span>
57:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">start</span>(<span class="ruby-identifier">options</span>={})
58:       <span class="ruby-identifier">session</span> = <span class="ruby-constant">Session</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)
59: 
60:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
61:         <span class="ruby-keyword kw">begin</span>
62:           <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">session</span>
63:           <span class="ruby-identifier">session</span>.<span class="ruby-identifier">loop</span>
64:           <span class="ruby-identifier">session</span>.<span class="ruby-identifier">close</span>
65:         <span class="ruby-keyword kw">end</span>
66:       <span class="ruby-keyword kw">else</span>
67:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">session</span>
68:       <span class="ruby-keyword kw">end</span>
69:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>